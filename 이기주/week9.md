# 8장 스프링이란 무엇인가?

스프링 프레임워크는 단순히 IoC/DI를 적용하는 기술을 넘어 엔터프라이즈 애플리케이션 개발 전 영역에 걸쳐 사용되는 광범위하고 체계적인 기술 집합이다.

- **스프링의 핵심**
    - 스프링은 IoC(Inversion of Control, 제어의 역전)와 DI(Dependency Injection, 의존성 주입)를 위한 컨테이너의 역할
    - 개발자가 비즈니스 로직에 집중하도록 도움

- **스프링의 가치**
    - 경량 컨테이너
        - 스프링은 EJB 같은 과거 기술에 비해 훨씬 가볍고 빠름
        - 개발과 테스트가 용이
    - 투명한 기술 지원
        - 스프링은 개발자가 복잡한 기술(트랜잭션 관리, ORM 연동 등)을 직접 구현하지 않고도 POJO(Plain Old Java Object)를 통해 해당 기술들을 투명하게 사용할 수 있도록 지원

- **스프링의 발전 방향 및 주요 기술**
    - 웹 개발 지원
        - MVC(Model-View-Controller) 패턴을 지원하는 Spring MVC 프레임워크를 통해 웹 애플리케이션 개발의 복잡성을 줄임
    - 기술 통합
        - JDBC, JPA/Hibernate(ORM), JMS 등 다양한 기반 기술과의 손쉬운 통합을 지원하여 개발 편의성을 극대화
    - 확장성 
        - AOP(Aspect-Oriented Programming, 관점 지향 프로그래밍)를 통해 핵심 비즈니스 로직과 부가 기능(로깅, 보안 등)을 분리하여 모듈화 및 재사용성을 높임
    - 경량 프레임워크
        - 단순한 컨테이너 역할에서 벗어나 복잡한 엔터프라이즈 시스템 구축을 위한 종합적인 솔루션으로 발전

- **스프링 컨테이너와 객체 관리**
    - IoC(제어의 역전)
        - 개발자가 직접 객체를 생성하고 관리하는 것이 아니라, *프레임워크(컨테이너)*가 객체의 생명주기 및 의존성 관계를 대신 관리
    - DI(의존성 주입)
        - 객체 간의 의존 관계를 외부(컨테이너)에서 주입함으로써 코드를 더 유연하고 테스트하기 쉽게 만듦

- **스프링의 목표**
    - 스프링은 개발자가 비즈니스 로직 외의 복잡한 기술 문제에 신경 쓰지 않고, 오직 핵심 비즈니스 로직 구현에만 집중할 수 있도록 돕는 것을 최종 목표로 함
    - 개발 생산성과 시스템의 품질을 동시에 향상시키는 것이 스프링의 존재 이유

- **POJO**
    - 순수한 자바 오브젝트를 의미하며, 특정 환경이나 규약에 종속되지 않는 일반적인 자바 객체
    - *EJB(Enterprise JavaBeans)*와 같은 복잡하고 무거운 엔터프라이즈 기술 규약에 구애받지 않고, 비즈니스 로직을 담는 데만 집중하는 객체
    - 단위 테스트의 용이성: 특정 프레임워크나 컨테이너 없이도 테스트 가능
    - 유연한 설계와 확장성: 환경이나 기술의 변화에 덜 영향을 받아 유연하고 확장 가능한 설계를 가능하게 함
    - POJO의 조건
        - 특정 기술에 의존하지 않는 *'순수성'*을 유지해야 함
        - 특정 환경/규약에 종속되지 않음
            - 웹 컨테이너, EJB 컨테이너 등 특정 실행 환경에 종속적인 코드나 기술(예: Servlet API, EJB API)을 포함해서는 안 됨
            - 특정 기술 API를 직접 호출하거나 구현하는 것이 아니라, 일반적인 자바의 객체지향 원칙을 지켜야 함
        - 기술의 구현 방법이 외부에 노출되지 않음
            - 비즈니스 로직은 그 자체로 기술적인 세부 사항으로부터 독립적이어야 함
            - 복잡한 엔터프라이즈 기술이 객체 내부에 직접 드러나선 안 됨
    - POJO를 지원하는 3대 핵심 기술
        - IoC/DI (제어의 역전/의존성 주입)
            - 객체의 생성, 의존성 관계 설정 및 관리 등의 제어 권한을 컨테이너가 대신 수행
            - 비즈니스 로직을 담은 POJO가 복잡한 기술적인 의존성 설정으로부터 해방되어 순수성을 유지할 수 있음
                - 이렇게 되면 개발자는 오직 비즈니스 로직 구현에 집중할 수 있음
        - AOP (Aspect-Oriented Programming, 관점 지향 프로그래밍)
            - *횡단 관심사(Cross-cutting Concerns)*를 핵심 비즈니스 로직과 분리
            - 트랜잭션, 보안, 로깅 등 부가적인 기술 기능을 비즈니스 로직이 담긴 POJO 코드에 침범하지 않고 선언적으로 적용할 수 있게 됨
                - 이렇게 되면 POJO의 순수성이 유지되면서도 엔터프라이즈 기능이 부여
        - PSA (Portable Service Abstraction, 서비스 추상화)
            - 엔터프라이즈 환경에서 사용되는 *다양한 서비스 기술(트랜잭션, ORM 등)*을 일관된 방식으로 접근할 수 있도록 추상화 계층을 제공
            - 개발자는 특정 기술의 복잡한 API 대신 스프링이 제공하는 추상화 인터페이스를 사용하여 코드를 작성
            - JDBC, JPA 등 하위 기술이 변경되어도 POJO의 코드는 거의 수정할 필요 없이 유연하게 대처할 수 있음
    - 스프링의 POJO 프로그래밍 전략
        - 기술적인 관심사를 분리
            - 비즈니스 로직과 기술적인 책임(트랜잭션, 보안 등)을 명확히 분리
            - POJO는 순수하게 비즈니스 로직만 담고, AOP를 활용해 기술적인 책임을 분리된 코드(애스펙트)로 관리
        - 도메인 기술에 대한 접근 방식을 추상화
            - 특정 기술을 스프링의 *서비스 추상화(PSA)*를 통해 덮어씌움
            - 개발자는 하위 기술 API가 아닌 스프링이 제공하는 추상화된 API를 사용함으로써 기술 변경에 유연하게 대응
        - 애플리케이션 컴포넌트 간의 관계를 관리
            - IoC/DI를 사용하여 객체 간의 의존성 문제를 해결
            - 객체들은 독립적으로 존재하며 테스트와 재활용이 쉬워짐

- **IoC/DI (제어의 역전/의존성 주입)**
    - *IoC (제어의 역전)*는객체의 생성과 생명주기를 개발자가 아닌 프레임워크(스프링 컨테이너)가 관리
    - *DI (의존성 주입)*는 이 IoC의 핵심 원리를 구체적으로 구현
        - DI의 작동 원리
            - 의존 대상 명시: POJO는 자신이 사용할 의존 객체를 직접 생성하거나 찾는 대신, 인터페이스를 통해 추상적으로만 명시
            - 컨테이너의 주입: 스프링 컨테이너는 설정 정보를 바탕으로 실제 의존 객체를 생성하고, 이를 POJO에 자동으로 주입하며 이는 런타임에 이루어짐
        - DI의 주요 장점
            - 테스트 용이성: 의존 관계가 외부에서 주입되므로, 테스트 시 *가짜 객체(Mock Object)*나 테스트용 객체를 쉽게 주입하여 단위 테스트를 독립적으로 수행할 수 있음
                - 예) DB를 사용하는 DAO를 테스트할 때 실제 DB 대신 메모리 DB나 Mock DAO 주입 가능
            - 유연한 설계와 확장성: 인터페이스를 중심으로 의존 관계가 형성되므로, 구현 클래스가 변경되어도 사용하는 객체(클라이언트) 코드는 변경할 필요가 없으므로 코드의 결합도를 낮춤
            - 코드의 재사용성: 다양한 환경에 맞게 의존 객체를 바꿔가며 사용할 수 있어 재사용성이 높아짐

- **PSA (Portable Service Abstraction, 서비스 추상화)**
    - PSA의 역할과 장점
        - 기술 종속성 제거: 트랜잭션이나 ORM(객체 관계 매핑)과 같은 복잡하고 다양한 기술 API를 스프링이 제공하는 표준화된 추상 인터페이스로 감싸줌
        - 유연성 극대화: 트랜잭션을 JDBC에서 JTA로 변경하더라도, 개발자는 스프링의 PlatformTransactionManager 인터페이스를 사용했기 때문에 코드 변경 없이 XML 설정만 변경하면 됨
        - POJO의 순수성 유지: POJO가 특정 기술의 복잡한 API 대신 스프링의 추상화된 API를 사용함으로써 기술 변화에 영향을 받지 않고 비즈니스 로직에만 집중할 수 있음
    - DI와의 관계
        - 서비스 추상화를 위해 정의된 인터페이스 구현체는 결국 DI 방식을 사용하여 개발된 POJO에 주입
        - PSA는 DI를 활용하여 구현됨

